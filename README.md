# KancolleTool
艦隊これくしょんキーボードツール

<b>概要</b><br/>
  DMMブラウザゲーム｢艦隊これくしょん｣をキーボードで操作するアプリ。<br/>
  Keybind.plistファイルに操作キーと座標を設定し、操作キーを押すと艦これ上の指定した座標をクリックする。<br/>
  操作キーについては自分でカスタマイズすることが可能。<br/>
  
  また、同じ操作を繰り返すマクロも実装。<br/>
  マクロキーと順番にクリックする座標を設定することにより、1回の入力で複数の座標をクリックすることが可能。<br/>
  マクロはサーバーから送られた情報を読んで実行する訳ではなく、指定した時間間隔ごとにクリックする。そのためサーバーの応答が遅い場合や、ネット回線の速度によっては誤動作も十分ありえる。そこは自己責任。<br/>

<b>動作環境</b><br/>
  Mac<br/>
  
<b>必須アプリ</b><br/>
  ブラウザ:Google Chrome <br/>
  Google拡張:艦これウィジェット<br/>
  Xocde (コンパイル用)<br/>
  cliclick (ターミナルからウインドウをクリックするアプリ)
  URL:https://www.bluem.net/de/mac/cliclick/ <br/>
  
  
<b>設定方法</b><br/>
  cliclickをダウンロードして、cliclickを/usr/local/bin/に移動する。<br/>
  GoogleChormeに艦これウィジェットをインストールし、中型の大きさで艦これを1度起動して、閉じる。<br/>
  ZIPをダウンロードしてxcodeプロジェクトを起動する。<br/>
  メニューのProduct > Archive を選択。右側の Export を押して好きな場所に出力。<br/>
  出力したKancolleToolを起動し、｢開始｣ボタンをクリック。(またはテキストボックスで｢open｣と入力)<br/>
  Mac標準の｢セキュリティとプライバシー｣のプライバシータブにある、｢下のアプリケーションにコンピューターの制御を許可｣でKancolleToolにチェックをつける<br/>
  
<b>使い方</b><br/>
  テキストボックスに｢艦これキー一覧｣で設定されているキーを入力。<br/>
  画面下にあるListに、今の入力モードで入力できるキーの一覧が表示されているので、それを見て入力するのも可。<br/>
  困ったときは｢a｣ボタンを押す。するとメイン画面に戻る。<br/>
  キーの確定はEnterボタンかSpaceキーのどちらか。何も入力されていない場合、直前で入力したキーの座標をクリックする。<br/>
  マクロをキーから実行する場合、先頭に｢@｣を入力する。これも画面下部の一覧に表示されている。<br/>
  どの画面でも基本的に｢j, k｣キーで下、上に移動する。<br/>
  
<b>表示されているボタンについて</b><br/>
  - 起動:艦これ画面が開いていない時に押すと、艦これウィジェットが起動する。起動しているときに押すとエラーメッセージが表示される。<br/>
  - 開始:ゲームスタートの座標をクリックする。<br/>
  - 終了:艦これウィジェットを閉じる。確認メッセージが出るのでOKボタンを押すと画面が閉じる。<br/>
  - Click:直前にキー入力、またはマクロで最後にクリックした座標をもう一度クリックする。<br/>
  - LC:右に表示された秒数の間、同じ座標を1秒間隔でクリックする。進撃など同じ場所を何度もクリックする場合に便利。｢@@｣に該当。<br/><br/>
  - 母港ポップアップ:母港用のマクロ。一覧から選択して右横の｢実行｣ボタンを押してマクロを実行する。<br/>
  ･ 補給旗艦:メイン画面の時に使用。第1艦隊の旗艦だけ補給して、解体メニューに移動する。主にキラ付けで帰ってきたときに使う。キーの｢@of｣に該当<br/>
  ･ 補給第1〜4艦隊:メイン画面の時に使用。遠征から帰ってきた艦隊を補給するときに使う。｢@o1〜@o4｣に該当。<br/>
  ･ 補給全艦:メイン画面の時に使用。第2〜4艦隊の補給を行う。遠征から帰ってきたときに使う。｢@oa｣に該当。<br/>
  ･ 補給任務:補給画面の時に使用。デイリーの補給任務を受けて実行すると燃料と弾薬を順番に補給してくれる。｢@oi｣
に該当。<br/>
  ･ 解体:編成等の画面の時に使用。工廠メニューを選んで解体の1番最初の艦を選ぶ。｢@kt｣に該当。<br/>
  ･ 流星改〜電探複合レシピ:工廠画面の時に使用。開発を選んでレシピを自動で入力してくれる。各キーは一覧参照。<br/><br/>
  - 遠征ポップアップ:遠征先を選択する。選択後、母ボタン->派ボタンで遠征先までクリックする。<br/>
  ･ 母:遠征一覧を選んだ後、一度メイン画面に移動する。｢a｣キーに該当。<br/>
  ･ 派:メイン画面から遠征先まで順番にクリックする。｢@e1〜@e40｣に該当。長距離遠征のみ｢@tkr｣。<br/><br/>

  - 出撃ポップアップ:出撃先を選択する。選択後、母港ボタン->出撃ボタンで出撃先までクリックする。<br/>
  ･ 母港:出撃先を選んだ後、一度メイン画面に移動する。｢a｣キーに該当。<br/>
  ･ 出撃:メイン画面から出撃先まで順番にクリックする。｢@1-1〜@6-3｣に該当。1-1の｢@kr｣。<br/>
  ･ 追ず:戦闘後の｢追撃せず｣を3秒間クリック。｢@g｣に該当<br/>
  ･ 夜戦:戦闘後の｢夜戦｣を3秒間クリック。｢@n｣に該当<br/>
  ･ 進撃:戦闘後の｢進撃｣を17秒間クリック。｢@s｣に該当<br/>
  ･ 撤退:戦闘後の｢撤退｣を7秒間クリック。｢@t｣に該当<br/>
  ･ 単、複、輪、梯、横:戦闘の陣形を12秒間クリック。｢@tn,@hk,@rn,@tk,@to｣に該当。<br/><br/>

<b>キーの変更方法</b><br/>
 KancolleToolを起動した状態で、⌘Pを押すとFinderが起動するので、Keybind.plistファイルを開く。<br/>
 艦これキー一覧.htmlから修正したいpointidを検索し、keybindタグの文字を変更する(何文字でもOK)。<br/>
 モード(Mode)別にpointidが存在する場合、モード毎に異なるキーを設定することも可能。<br/>
 arrayタグで複数のpointidを持つキーは、キーを押すたびに次のpointidに移動する仕組み。<br/>
 ファイルを保存してKancolleToolを再起動する。<br/><br/>
 
<b>マクロの追加、変更方法</b><br/>
 Macro_Bokou.plistを開いて、dictタグの中身を修正、または追加する。<br/>
 Macro_Bokou.plistの場合はMacroCategoryをBokouにする。<br/>
 Macroidは他と被らないidを設定する。<br/>
 modeidはマクロを実行し終わった後、そのモードに設定されるためMode.plistの中からどのモードで終了するか選ぶ<br/>
 modeNameはマクロにつける名前。わかりやすいものを設定しておくと良い。<br/>
 macroDispStateは、Toolの下部にある表に表示するかどうか。NOだと表示しない。<br/>
 macroOperationでマクロでクリックする座標を設定する。dictタグで囲まれた内容がクリックする座標<br/>
 pointidはクリックする座標、isClickはクリックするかどうか。NOだとクリックせずにカーソルを移動するだけ<br/>
 repeatはクリックする回数。0で1回。1で2回という意味。<br/>
 waitsecはクリックした後にスリープする時間。秒単位。整数の場合はintegerタグ、少数の場合はrealタグで囲まないと正常に動作しないので注意が必要<br/><br/>
 
<b>Widget.plistについて</b><br/>
 LongClickの初期クリック秒数や、上下に移動するs、dキーを別のキーに割り当てることが可能。<br/>
 別のキーに割り当てる場合、同じモード内で他のキーと被らないようにする。<br/>
